AOS.init();const validaciones={nombre:!1,contacto:!1,numero:!1,hora:!1,fecha:!1},cliente={nombre:"",contacto:"",numero:"",hora:"",fecha:"",pedidos:[]},mostrarCompra=()=>{document.querySelector(".modal-resumen");if(validaciones.nombre&&validaciones.contacto&&validaciones.numero&&validaciones.hora&&validaciones.fecha)return cliente.pedidos.length<=0?void template_vacio():void templateResumen(cliente);template_vacio()},template_vacio=()=>{let e=document.querySelector(".modal-resumen");e.classList.add("modal-resumenes"),e.innerHTML='<div class="modal-alerta">\n  <img src="img/undraw_hamburger_-8-ge6.svg" alt="">\n  <p class="alerta-msg text-center">tu lista de pedido esta vacio</p>\n    <div class="boton d-flex justify-content-center">\n       <button class="btn-menu  mx-auto">ir al menu</button>\n    </div>\n</div>\n<i class=\'bx bxs-x-circle position-absolute salir\'></i>'},templateResumen=(e={})=>{const t=document.querySelector(".modal-resumen");for(;t.firstChild;)t.removeChild(t.firstChild);const n=document.createElement("i");n.className="bx bxs-x-circle position-absolute salir",t.appendChild(n);const a=document.createElement("div");a.classList.add("resumen-final"),t.appendChild(a);const r=document.createElement("h1");r.className="text-white text-center mb-5 mt-3",r.innerHTML="resumen del pedido",a.appendChild(r);const o=document.createElement("div");o.className="resumen-ctr",a.appendChild(o);const i=document.createElement("div");i.className="resumen-lista",o.appendChild(i);const s=document.createElement("table");s.className="table table-dark table-striped",s.innerHTML='\n     <thead>\n     <tr>\n       <th scope="col">imagen</th>\n       <th scope="col">nombre</th>\n       <th scope="col">precio</th>\n     </tr>\n   </thead>\n   <tbody>\n   </tbody>',i.appendChild(s);const c=document.querySelector("tbody");e.pedidos.forEach(e=>{const t=document.createElement("tr");t.innerHTML=`\n            <th scope="row"><img src="${e.url}" alt="" width="120px"></th>\n            <td>${e.nombre}</td>\n            <td class="precios">$${e.precio}</td>\n            `,c.appendChild(t)});let l=200;const d=e.pedidos.length;let m=0;document.querySelectorAll(".precios").forEach(e=>{const t=Number(e.textContent.replace("$",""));m+=t,l-=t});const u=document.createElement("div");u.className="resumen-compra bg-dark",u.innerHTML=`\n       <div class="resumen-envio d-flex justify-content-center align-items-center mt-4">\n                    <i class='bx bxs-truck icon-envio'></i>\n                    <p class="mb-0 envio_gratis">te faltan ${l}$ para el envio gratis</p>\n                  </div>\n                    <div class="resumen-pago mt-3 px-2 pb-2">\n                        <p class="title-resumen my-2 mx-2">RESUMEN:</p>\n                        \n                        <div class="resumen-articulos d-flex justify-content-between mb-3">\n                            <p>total de pedidos:</p>\n                            <p>${d}</p>\n                        </div>\n                        <div class="resumen-total d-flex justify-content-between mb-3">\n                            <p>total a pagar:</p>\n                            <p>${m}</p>\n                        </div>\n                     <button class="boton-compra py-2">realizar la compra</button>\n                    </div>\n       `;const p=u.querySelector(".envio_gratis");console.log(p),l<=0&&(p.innerHTML="envio gratis"),o.appendChild(u)};let pagina=1;document.addEventListener("DOMContentLoaded",e=>{document.querySelector(".ctr-menu-"+pagina).classList.add("activo"),imprimirMenu(),inputValidaciones(),fechaMinima(),botonSiguiente(),botonAtras(),controlMenu(),mostrarCompra(),agregarResumenMenu(),abrirModal(),cerrarModal()});const abrirModal=()=>{const e=document.querySelector("body"),t=document.querySelector(".modal-resumen");document.querySelector(".menu-resumen").addEventListener("click",n=>{n.preventDefault(),t.classList.add("mostrar"),e.classList.add("ocultar")})},cerrarModal=()=>{const e=document.querySelector(".modal-resumen"),t=document.querySelector("body");e.addEventListener("click",n=>{n.target.classList.contains("salir")&&(e.classList.remove("mostrar"),t.classList.remove("ocultar"))})},imprimirMenu=async()=>{const e=await fetch("/menu",{method:"get"}),t=await e.json();mostrarMenu1(t.result),mostrarMenu2(t.result),mostrarMenu3(t.result)},mostrarMenu1=(e=[])=>{const t=document.querySelector(".ctr-menu-1");for(let n=0;n<=2;n++){const a=templateMenu(e[n]);t.appendChild(a)}},mostrarMenu2=(e=[])=>{const t=document.querySelector(".ctr-menu-2");for(let n=3;n<=5;n++){const a=templateMenu(e[n]);t.appendChild(a)}},mostrarMenu3=(e=[])=>{const t=document.querySelector(".ctr-menu-3");for(let n=6;n<=8;n++){const a=templateMenu(e[n]);t.appendChild(a)}},botonSiguiente=()=>{document.querySelector(".derecha").addEventListener("click",e=>{pagina++,controlMenu()})},botonAtras=()=>{document.querySelector(".izquierda").addEventListener("click",e=>{pagina--,controlMenu()})},controlMenu=()=>{const e=document.querySelector(".derecha"),t=document.querySelector(".izquierda"),n=document.querySelector(".activo");n&&n.classList.remove("activo");document.querySelector(".ctr-menu-"+pagina).classList.add("activo"),1===pagina?(t.classList.remove("añadir-pedido"),e.classList.remove("añadir-pedido"),t.classList.add("ocultar")):2===pagina?(t.classList.remove("ocultar"),e.classList.remove("ocultar")):3===pagina&&e.classList.add("ocultar")},agregarResumenMenu=()=>{document.querySelector(".menu").addEventListener("click",e=>{if("BUTTON"===e.target.tagName){const t=e.target;if(t.classList.contains("añadir-pedido")){const e=t.dataset.id;eliminarPedido(e),t.innerHTML="<i class='bx bx-food-menu'></i>agregar a pedido",t.classList.remove("añadir-pedido")}else{let n={nombre:e.target.parentElement.parentElement.querySelector("h1").textContent,precio:Number(e.target.parentElement.parentElement.querySelector(".precio > p").textContent.replace("$","")),url:e.target.parentElement.parentElement.querySelector("img").src,id:e.target.parentElement.parentElement.querySelector("button").dataset.id};agregarApedido(n),t.classList.add("añadir-pedido"),t.innerHTML="<i class='bx bx-food-menu'></i> quitar de pedido"}}else e.target.tagName})},agregarApedido=(e={})=>{const{pedidos:t}=cliente;cliente.pedidos=[...t,e],mostrarCompra()},eliminarPedido=e=>{const{pedidos:t}=cliente;cliente.pedidos=t.filter(t=>t.id!==e),console.log(cliente),mostrarCompra()},inputValidaciones=()=>{const e={nombre:/^[a-zA-ZÀ-ÿ\s]{1,40}$/,correo:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,telefono:/^\d{10}$/},t=document.querySelectorAll(".formulario input");t[0].addEventListener("keyup",t=>{if(e.nombre.test(t.target.value))return cliente.nombre=t.target.value,validaciones.nombre=!0,void mostrarCompra();msgAdvertencias("escribe un nombre valido"),validaciones.nombre=!1,mostrarCompra()}),t[1].addEventListener("input",e=>{if(0===new Date(e.target.value).getDay())return validaciones.fecha=!1,msgAdvertencias("dia lunes no hay envios disponibles"),void mostrarCompra();cliente.fecha=e.target.value,validaciones.fecha=!0,mostrarCompra()}),t[2].addEventListener("keyup",t=>{if(e.correo.test(t.target.value))return cliente.contacto=t.target.value,validaciones.contacto=!0,void mostrarCompra();msgAdvertencias("escribe un email valido"),validaciones.contacto=!1,mostrarCompra()}),t[3].addEventListener("input",e=>{if(Number(e.target.value.split(":")[0])<9)return msgAdvertencias("ese horario esta cerrada la tienda"),validaciones.hora=!1,void mostrarCompra();cliente.hora=e.target.value,validaciones.hora=!0,mostrarCompra()}),t[4].addEventListener("keyup",t=>{if(e.telefono.test(t.target.value))return cliente.numero=t.target.value,validaciones.numero=!0,void mostrarCompra();msgAdvertencias("numero telefonico minimo 10 caracteres"),validaciones.numero=!1,mostrarCompra()})},fechaMinima=()=>{const e=document.querySelector(".fecha"),t=new Date,n=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`;e.min=n},msgAdvertencias=e=>{const t=document.querySelector(".container-errors");t.classList.add("error"),t.innerHTML=e,setTimeout(()=>{t.classList.remove("error")},1700)},templateMenu=(e={})=>{const t=document.createElement("div");return t.className="card card-menu ",t.setAttribute("data-aos","flip-right"),t.innerHTML=`\n     <div class="menu-img position-relative">\n     <img src="${e.url}" alt="" class="rounded-2">\n     \n     <div class="precio d-flex justify-content-center align-items-center position-absolute">\n         <p>$${e.precio}</p>\n     </div>\n    </div>\n    <div class="menu-descripcion">\n     <h1 class="text-center py-2">${e.nombre}</h1>\n     <p class="px-3">incluye:</p>\n     <ul class="">\n         <li>${e.descripcion[0]}</li>\n         <li>${e.descripcion[1]}</li>\n         <li>${e.descripcion[2]}</li>\n     </ul>\n     <button class="agregar-pedido" data-id=${e.data_id}><i class='bx bx-food-menu'></i> agregar a pedido</button>\n </div>\n     `,t};
//# sourceMappingURL=build.js.map
